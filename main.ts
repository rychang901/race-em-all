namespace SpriteKind {
    export const Scenery = SpriteKind.create()
    export const Racer2Scenery = SpriteKind.create()
}
controller.right.onEvent(ControllerButtonEvent.Released, function () {
    if (RaceStarted && !(controller.right.isPressed())) {
        animation.stopAnimation(animation.AnimationTypes.All, Lama_White)
        IsRacerWhiteMoving = false
        for (let value of sprites.allOfKind(SpriteKind.Scenery)) {
            value.setVelocity(0, 0)
        }
    }
    animation.runImageAnimation(
    Lama_White,
    [img`
        ..................................................
        ..................................................
        ..................................................
        ........................11111111111...............
        ........................11111111111...............
        ........................11111111111...............
        ........................11111111111...............
        ........................11111dddddd...............
        ........................11111dddddd...............
        ........................11111dddfddddd............
        ........................11111ddddddddd............
        .........................1111ddddddddd............
        .........................1111111111...............
        .........................1111111111...............
        .........................1111111111...............
        .........................1111111111...............
        .........................1111111111...............
        .........................1111111111...............
        .........................1111111111...............
        .........................1111111111...............
        .........................1111111111...............
        ..................11111..1111111111...............
        ................11111111.1111111111...............
        ..............111111111111111111111...............
        ..............111111111111111111111...............
        ..............1111111111111111111111..............
        ..............11111111111111111111111.............
        ..............11111111111111111111111.............
        ..............11111111111111111111111.............
        ..............11111111111111111111111.............
        ..............11111111111111111111111.............
        ...............1111111111111111111111.............
        ...............1111111111111111111111.............
        ................111111d1111111111111..............
        ................111111ddd111111111................
        .................11111ddd1111111d.................
        ..................1111ddd11111ddd.................
        ..................1111ddd.1111ddd.................
        ...................111ddd..111ddd.................
        ....................11.dd...11.dd.................
        ..................................................
        ..................................................
        ..................................................
        ..................................................
        ..................................................
        ..................................................
        ..................................................
        ..................................................
        ..................................................
        ..................................................
        `],
    150,
    true
    )
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    if (RaceStarted) {
        animation.runImageAnimation(
        Lama_White,
        [img`
            ..................................................
            ..................................................
            ..................................................
            ........................11111111111...............
            ........................11111111111...............
            ........................11111111111...............
            ........................11111111111...............
            ........................11111dddddd...............
            ........................11111dddddd...............
            ........................11111dddfddddd............
            ........................11111ddddddddd............
            .........................1111ddddddddd............
            .........................1111111111...............
            .........................1111111111...............
            .........................1111111111...............
            .........................1111111111...............
            .........................1111111111...............
            .........................1111111111...............
            .........................1111111111...............
            .........................1111111111...............
            .........................1111111111...............
            ..................11111..1111111111...............
            ................11111111.1111111111...............
            ..............111111111111111111111...............
            ..............111111111111111111111...............
            ..............1111111111111111111111..............
            ..............11111111111111111111111.............
            ..............11111111111111111111111.............
            ..............11111111111111111111111.............
            ..............11111111111111111111111.............
            ..............11111111111111111111111.............
            ...............1111111111111111111111.............
            ...............1111111111111111111111.............
            ................111111d1111111111111..............
            ................111111ddd111111111................
            .................11111ddd1111111d.................
            ..................1111ddd11111ddd.................
            ..................1111ddd.1111ddd.................
            ...................111ddd..111ddd.................
            ....................11.dd...11.dd.................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            `,img`
            ..................................................
            ..................................................
            ..................................................
            .......................11111111111................
            .......................11111111111................
            .......................11111111111................
            .......................11111111111................
            .......................11111dddddd................
            .......................11111dddddd................
            .......................11111dddfddddd.............
            .......................11111ddddddddd.............
            ........................1111ddddddddd.............
            ........................1111111111................
            ........................1111111111................
            ........................1111111111................
            ........................1111111111................
            ........................1111111111................
            ........................1111111111................
            ........................1111111111................
            ........................1111111111................
            ........................1111111111................
            .................11111..1111111111................
            ...............11111111.1111111111................
            .............111111111111111111111................
            .............111111111111111111111................
            .............1111111111111111111111...............
            .............11111111111111111111111..............
            .............11111111111111111111111..............
            .............11111111111111111111111..............
            .............11111111111111111111111..............
            .............11111111111111111111111..............
            ..............1111111111111111111111..............
            ..............111111111111111111111...............
            ..............111111dd111111111111................
            ..............111111dd.1111111111.................
            ..............11111dd...d1111111..................
            ..............1111ddd...ddd11111..................
            ..............1111dd....ddd1111...................
            ..............111ddd....ddd111....................
            ..............11ddd.....dd.11.....................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            `,img`
            .........................11111111111..............
            .........................11111111111..............
            .........................11111111111..............
            .........................11111111111..............
            .........................11111dddddd..............
            .........................11111dddddd..............
            .........................11111dddfddddd...........
            .........................11111ddddddddd...........
            ..........................1111ddddddddd...........
            ..........................1111111111..............
            ..........................1111111111..............
            ..........................1111111111..............
            ..........................1111111111..............
            ..........................1111111111..............
            ..........................1111111111..............
            ..........................1111111111..............
            ..........................1111111111..............
            ..........................1111111111..............
            ...................11111..1111111111..............
            .................11111111.1111111111..............
            ...............111111111111111111111..............
            ...............111111111111111111111..............
            ...............1111111111111111111111.............
            ...............11111111111111111111111............
            ...............11111111111111111111111............
            ...............11111111111111111111111............
            ...............11111111111111111111111............
            ...............11111111111111111111111............
            ................1111111111111111111111............
            ................111111111111111111111.............
            ................111111dd111111111111..............
            ................111111dd.1111111111...............
            ................11111dd...d1111111................
            ................1111ddd...ddd11111................
            ................1111dd....ddd1111.................
            ................111ddd....ddd111..................
            ................11ddd.....dd.11...................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            `,img`
            ..................................................
            ..................................................
            ..................................................
            ...........................11111111111............
            ...........................11111111111............
            ...........................11111111111............
            ...........................11111111111............
            ...........................11111dddddd............
            ...........................11111dddddd............
            ...........................11111dddfddddd.........
            ...........................11111ddddddddd.........
            ............................1111ddddddddd.........
            ............................1111111111............
            ............................1111111111............
            ............................1111111111............
            ............................1111111111............
            ............................1111111111............
            ............................1111111111............
            ............................1111111111............
            ............................1111111111............
            ............................1111111111............
            .....................11111..1111111111............
            ...................11111111.1111111111............
            .................111111111111111111111............
            .................111111111111111111111............
            .................1111111111111111111111...........
            .................11111111111111111111111..........
            .................11111111111111111111111..........
            .................11111111111111111111111..........
            .................11111111111111111111111..........
            .................11111111111111111111111..........
            ..................1111111111111111111111..........
            ..................111111111111111111111...........
            ..................111111dd111111111111............
            ..................111111dd.1111111111.............
            ..................11111dd...1111111d..............
            ..................1111ddd...11111ddd..............
            ..................1111dd.....1111ddd..............
            ..................111ddd......111ddd..............
            ..................11ddd........11.dd..............
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            `],
        150,
        true
        )
        IsRacerWhiteMoving = true
        for (let value of sprites.allOfKind(SpriteKind.Scenery)) {
            value.setVelocity(-50, 0)
        }
    }
})
let projectile: Sprite = null
let IsRacerWhiteMoving = false
let RaceStarted = false
let textSprite: TextSprite = null
let Lama_White: Sprite = null
Lama_White = sprites.create(img`
    ..................................................
    ..................................................
    ..................................................
    ...........................11111111111............
    ...........................11111111111............
    ...........................11111111111............
    ...........................11111111111............
    ...........................11111dddddd............
    ...........................11111dddddd............
    ...........................11111dddfddddd.........
    ...........................11111ddddddddd.........
    ............................1111ddddddddd.........
    ............................1111111111............
    ............................1111111111............
    ............................1111111111............
    ............................1111111111............
    ............................1111111111............
    ............................1111111111............
    ............................1111111111............
    ............................1111111111............
    ............................1111111111............
    .....................11111..1111111111............
    ...................11111111.1111111111............
    .................111111111111111111111............
    .................111111111111111111111............
    .................1111111111111111111111...........
    .................11111111111111111111111..........
    .................11111111111111111111111..........
    .................11111111111111111111111..........
    .................11111111111111111111111..........
    .................11111111111111111111111..........
    ..................1111111111111111111111..........
    ..................111111111111111111111...........
    ..................111111dd111111111111............
    ..................111111dd.1111111111.............
    ..................11111dd...1111111d..............
    ..................1111ddd...11111ddd..............
    ..................1111dd.....1111ddd..............
    ..................111ddd......111ddd..............
    ..................11ddd........11.dd..............
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    `, SpriteKind.Player)
let Lama_Brown = sprites.create(img`
    ..................................................
    ..................................................
    ..................................................
    ...........................eeeeeeeeeee............
    ...........................eeeeeeeeeee............
    ...........................eeeeeeeeeee............
    ...........................eeeeeeeeeee............
    ...........................eeeeedddddd............
    ...........................eeeeedddddd............
    ...........................eeeeedddfddddd.........
    ...........................eeeeeddddddddd.........
    ............................eeeeddddddddd.........
    ............................eeeeeeeeee............
    ............................eeeeeeeeee............
    ............................eeeeeeeeee............
    ............................eeeeeeeeee............
    ............................eeeeeeeeee............
    ............................eeeeeeeeee............
    ............................eeeeeeeeee............
    ............................eeeeeeeeee............
    ............................eeeeeeeeee............
    .....................eeeee..eeeeeeeeee............
    ...................eeeeeeee.eeeeeeeeee............
    .................eeeeeeeeeeeeeeeeeeeee............
    .................eeeeeeeeeeeeeeeeeeeee............
    .................eeeeeeeeeeeeeeeeeeeeee...........
    .................eeeeeeeeeeeeeeeeeeeeeee..........
    .................eeeeeeeeeeeeeeeeeeeeeee..........
    .................eeeeeeeeeeeeeeeeeeeeeee..........
    .................eeeeeeeeeeeeeeeeeeeeeee..........
    .................eeeeeeeeeeeeeeeeeeeeeee..........
    ..................eeeeeeeeeeeeeeeeeeeeee..........
    ..................eeeeeeeeeeeeeeeeeeeee...........
    ..................eeeeeeddeeeeeeeeeeee............
    ..................eeeeeedd.eeeeeeeeee.............
    ..................eeeeedd...eeeeeeed..............
    ..................eeeeddd...eeeeeddd..............
    ..................eeeedd.....eeeeddd..............
    ..................eeeddd......eeeddd..............
    ..................eeddd........ee.dd..............
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    ..................................................
    `, SpriteKind.Player)
let Traffic_Light = sprites.create(assets.image`Traffic Light`, SpriteKind.Player)
Traffic_Light.z = 874091828
Lama_Brown.y = 98
Lama_White.y = 33
scene.setBackgroundColor(9)
tiles.setTilemap(tilemap`level1`)
timer.background(function () {
    pause(100)
    Traffic_Light.image.replace(12, 2)
    pause(100)
    Traffic_Light.image.replace(2, 12)
    Traffic_Light.image.replace(14, 5)
    pause(100)
    Traffic_Light.image.replace(5, 14)
    Traffic_Light.image.replace(6, 7)
    pause(100)
    Traffic_Light.destroy()
    textSprite = textsprite.create("Go!")
    textSprite.setMaxFontHeight(64)
    textSprite.setOutline(1, 15)
    textSprite.setPosition(90, 53)
    pause(100)
    textSprite.destroy()
    RaceStarted = true
})
game.onUpdateInterval(1000, function () {
    if (IsRacerWhiteMoving && Math.percentChance(40)) {
        projectile = sprites.createProjectileFromSprite(img`
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            .................8............
            ................888...........
            ...............88588..........
            .........3......888...........
            ........333......8............
            .......33533.....7............
            ........333...7777............
            .........3.....777............
            .........7......77............
            ......7777.......7............
            .......777.......7............
            ........77.......777..........
            .........7.......77...........
            .........7.......7............
            .........7.......7............
            `, projectile, -50, 0)
        projectile.setKind(SpriteKind.Scenery)
        projectile.y = 33
        projectile.x = 160
    }
})
